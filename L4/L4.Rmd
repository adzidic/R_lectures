---
title: "Lecture 4: Installing packages"
date: "`r format(Sys.time(), '%d %B %Y')`"

output:
   html_document:
     theme: flatly
     toc: true
     toc_depth: 4
     number_sections: yes
     
---

R packages are collections of code that hold data and mainly functions used in R. There are three types of packages within R: 

1. Base packages - packages that come with R installation (base, compiler, datasets, graphics, grDevices, grid, methods, parallel, splines, stats, stats4, tcltk, tools and utils)
2. Recommended packages (boot, class, cluster, codetools, foreign, KernSmooth, lattice, MASS, Matrix, mgcv, nlme, nnet, rpart, spatial, survival) -these packages are not loaded automatically, so you have to load them with function library('name_of_the_package')
2. User-contributed packages - all other packages written by the users.


Many  packages include ”vignettes” which gives an overview of the package and sometimes includes examples.

If you want to see all installed packages you could use function installed.packages(). Under Priority column it is defined if the package is Base or Recommended.

```{r installed.packages}
#installed.packages() - there are a lot of packages, therefore it is mentioned here as a comment
```

# Install packages

**IMPORTANT - To install packages you need internet connection**

First we have to define CRAN downloading site as shown in new picture:

![Tools global options!](/Users/alendzidic/Documents/PROJECTS/R_lectures/L4/Tools_global_options.png)


From R studio version v0.99.467 there is an option for secure downloads from CRAN as shown in picture:

![Secure download with RStudio!](/Users/alendzidic/Documents/PROJECTS/R_lectures/L4/Secure_and_CRAN_Ireland.jpg)


You can install packages in two ways:

1. Through RStudio packages pane 

Fist click packages (*STEP 1*) on Packages pane on the right down part of RStudio screen as shown in the picture Package installation with RStudio. Thereafter click Install (*Step 2*).

![Package installation with RStudio!](/Users/alendzidic/Documents/PROJECTS/R_lectures/L4/Package_pane_installation.jpg)


Then new window will appear as shown in following picture:

![Package installation with RStudio new window!](/Users/alendzidic/Documents/PROJECTS/R_lectures/L4/Install_siar_package.png)

Type in the name of the package you want to install and press Install button.


2. Directly with code

You can install packages directly with code, first you define cran, then package to install and with library at the end you are uploading the package to R
```{r}
options(repos=c(CRAN="https://ftp.heanet.ie/mirrors/cran.r-project.org/"))
install.packages('siar') # Be aware that R is case sensitive!
library('siar')
```

**IMPORTANT - When you close you RStudio session, the packages will close too. Therefore, you need to load them next time you want ot use them.**


## Work with already installed packages


### Detach package

If you wish to detach some of already installed packages you can do it in two ways:

1. Through RStudio packages pane 

You could do that by removing checked box as shown on next picture:

![R package check box !](/Users/alendzidic/Documents/PROJECTS/R_lectures/L4/Check_box.jpg)

If you uncheck this box (*see picture: uncheck box*) you will see in the Console window following function:

detach("package:siar", unload=TRUE)

![R package uncheck box !](/Users/alendzidic/Documents/PROJECTS/R_lectures/L4/Uncheck_box.jpg)

However if you want to deinstall package bayesm that is required by package siar you will receive following notice:

package ‘bayesm’ is required by ‘siar’ so will not be detached


2. Directly with code

You can do the same with function detach as follows:

```{r}
detach("package:siar", unload=TRUE)
```


### Remove package

1. Through RStudio packages pane 

If you want to remove some of the packages then you have to press X on the right end side of the name of the package as shown in red rectange on the picture.

![Remove R package !](/Users/alendzidic/Documents/PROJECTS/R_lectures/L4/Uninstall.jpg)

2. Directly with code


The same can be performed with remove.packages function as follows:

```{r}
remove.packages("siar")
```



### Update packages

1. Through RStudio packages pane 

If you want to update packages you have to click update and RStudio console will ask you about update for each new package that exist in your list of packages

![Update R package !](/Users/alendzidic/Documents/PROJECTS/R_lectures/L4/Update.jpg)

2. Directly with code

The same can be performed with update.packages function as follows:

```{r}
update.packages() # it will ask you in the console window if you want to update packages with multichoice answer (yes/no/cancel)
```


# Help with package installation or removal

[CRAN_help](https://cran.r-project.org/doc/FAQ/R-FAQ.html)

